<Page
  xmlns="http://schemas.nativescript.org/tns.xsd"
  loaded="onPageLoaded"
  xmlns:exoplayer="nativescript-exoplayer"
>
  <!-- xmlns:VideoPlayer="nativescript-videoplayer" -->
  <!-- navigatingTo="onNavigatingTo" -->
  <StackLayout>
    <StackLayout class="video-player">
        <exoplayer:Video 
          id="videoPlayer"
          controls="true" 
          finished="{{ videoFinished }}"
          loop="true" 
          autoplay="true" 
          height="280" 
          src="http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8"
          observeCurrentTime="true"
          currentTimeUpdated="{{ onTick }}"
          playbackReady="{{ isReady }}"
        />
        <!-- <VideoPlayer:Video 
          id="videoPlayer"
          controls="true" 
          finished="{{ videoFinished }}"
          loop="true" 
          autoplay="false" 
          height="280" 
          src="http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8"
          observeCurrentTime="true"
          currentTimeUpdated="{{ onTick }}"
        /> -->
      <Label text="new video page" />
    </StackLayout>
    <StackLayout class="controllers">
      <FlexboxLayout class="player-controls">
        <Label class="player-controls-button" tap="{{ decrementSec }}" text="-1 sec"/>
        <Label class="player-controls-button" tap="{{ togglePlay }}" text="{{ isPlaying ? 'Pause' : 'Play' }}"/>
        <Label class="player-controls-button" tap="{{ incrementSec }}" text="+1 sec"/>
      </FlexboxLayout>
      <GridLayout class="sprites-seekbar">
        <AbsoluteLayout >
          <Label left="5" text="{{ formatTime(minSeekDuration) }}" />
          <Label left="300" text="{{ formatTime(maxSeekDuration) }}" /> 
        </AbsoluteLayout>
        <ScrollView id="scrollView" class="list-wrapper" orientation="horizontal" >         
            <Repeater id="framesView" items="{{ items }}" marginLeft="50%" marginRight="50%" >
              <Repeater.itemsLayout>
                <StackLayout class="list" orientation="horizontal" width="{{ framesViewWidth }}" />
              </Repeater.itemsLayout>
              <Repeater.itemTemplate>
                <Label class="list-item" text="{{ $value.index }}" backgroundColor="{{ $value.index % 2 === 0 ? '#023e8a' : '#0077b6' }}"/>
              </Repeater.itemTemplate>
            </Repeater>
        </ScrollView>
        <AbsoluteLayout horizontalAlignment='center' class="current-time-marker" />
      </GridLayout>
      <GridLayout height="20">
        <Label text="{{ formatTime(currentTime) }}" horizontalAlignment='center' color="white" fontSize="17"/>
      </GridLayout>
      <AbsoluteLayout 
        id="locationBox" 
        class="location-indicator"
        pinch="{{ handleLocationPinch }}"
      >
        <AbsoluteLayout 
          pan="{{ handleDragCurrentTime }}" 
          class="current-location" 
          top="5" 
          left="{{ currentLocationLeft }}" 
          width="{{ currentLocationWidth }}"
        />  
      </AbsoluteLayout>
      <FlexboxLayout class="location-indicator-labels">
        <Label text="00:00:00" />
        <Label text="{{ formatTime(duration) }}" />
      </FlexboxLayout>
    </StackLayout>
  </StackLayout>
</Page>